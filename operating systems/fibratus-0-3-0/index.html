<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Fibratus 0.3.0 &#8211; Rabbit Stack</title>
<meta name="description" content="I'm pleased to announce the release of Fibratus 0.3.0. This version ships with support for context switch instrumentation through the ContextSwitch kernel event type.">
<meta name="keywords" content="operating systems, windows, kernel, system calls, exploration, python, cython, tracing, context switch instrumentation, profiling">



<!-- Twitter Cards -->
<meta name="twitter:title" content="Fibratus 0.3.0">
<meta name="twitter:description" content="I'm pleased to announce the release of Fibratus 0.3.0. This version ships with support for context switch instrumentation through the ContextSwitch kernel event type.">



<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://rabbitstack.github.io/images/rabbit-bkgd.jpg">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Fibratus 0.3.0">
<meta property="og:description" content="I'm pleased to announce the release of Fibratus 0.3.0. This version ships with support for context switch instrumentation through the ContextSwitch kernel event type.">
<meta property="og:url" content="http://rabbitstack.github.io/operating%20systems/fibratus-0-3-0/">
<meta property="og:site_name" content="Rabbit Stack">





<link rel="canonical" href="http://rabbitstack.github.io/operating%20systems/fibratus-0-3-0/">
<link href="http://rabbitstack.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Rabbit Stack Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://rabbitstack.github.io/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="http://rabbitstack.github.io/assets/js/vendor/html5shiv.min.js"></script>
	<script src="http://rabbitstack.github.io/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://rabbitstack.github.io/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://rabbitstack.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://rabbitstack.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://rabbitstack.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://rabbitstack.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://rabbitstack.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://rabbitstack.github.io/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
		<div class="site-name">
			<!-- <img src="/images/rabbit-small.jpg" alt="Rabbit Stack logo" class="logo" /> -->
			<!-- <a href="http://rabbitstack.github.io/">Rabbit Stack</a> -->
			<a href="http://rabbitstack.github.io/"><span class="site-name-segment">Rabbit</span> <span class="big-font">Stack</span></a>

		</div><!-- /.site-name -->

	
	
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				    
				        
				    
				    <li><a href="http://rabbitstack.github.io#" >Home</a></li>
				
				    
				        
				    
				    <li><a href="http://rabbitstack.github.io/posts/" >Archive</a></li>
				
				    
				        
				    
				    <li><a href="http://rabbitstack.github.io/about/" >About</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->


  <div class="image-wrap">
  <img class="bkg" src=
    
      "http://rabbitstack.github.io/images/rabbit-bkgd.jpg"
    
  alt="Fibratus 0.3.0 feature image">
  
       <div class="headline-wrap">
          <img src="http://rabbitstack.github.io/images/rabbitstack.png" />
          <h1> The place where bunnies dwell </h1>
          <h2> And bits become colossal </h2>
      </div>
  </div><!-- /.image-wrap -->


<div id="main" role="main">
  <div class="article-author-side">
    


<div itemscope itemtype="http://schema.org/Person">


	<img src="http://rabbitstack.github.io/images/nedo.jpg" class="bio-photo" alt="Nedim Šabić bio photo">


  <h3 itemprop="name">Nedim Šabić</h3>
  <p>Senior software engineer, devops enthusiast and platform architect who is also very curious about OS design, internals and implementation. Falling in love with Rust, Go and idiomatic sugars of Ruby, although he is more experienced in Python, J2EE platform and Spring framework ecosystem for development of distributed and event processing solutions. He never stops learning, and at the moment he is reading a lot about Big data, machine learning, virtualization and cloud technologies.</p>
  <a href="mailto:bhnedo@hotmail.com" class="author-social" target="_blank"><i class="fa fa-fw fa-envelope-square"></i>Email</a>
  
  <a href="http://facebook.com/nedim.sabic.39" class="author-social" target="_blank"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a>
  
  <a href="https://es.linkedin.com/pub/nedim-šabić/107/435/8a6" class="author-social" target="_blank"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a>
  
  
  <a href="http://github.com/bhnedo" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>
  <a href="http://stackoverflow.com/users/1027467/nedo" class="author-social" target="_blank"><i class="fa fa-fw fa-stack-overflow"></i> Stackoverflow</a>
  
  
  
  
  
  
  <a href="http://soundcloud.com/nedim-abi" class="author-social" target="_blank"><i class="fa fa-fw fa-soundcloud"></i> Soundcloud</a>
  
  
</div>

  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="http://rabbitstack.github.io/operating%20systems/fibratus-0-3-0/" rel="bookmark" title="Fibratus 0.3.0">Fibratus 0.3.0</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p>I’m pleased to announce the release of <strong>Fibratus 0.3.0</strong>. This version ships with support for context switch instrumentation through the <strong>ContextSwitch</strong> kernel event type.</p>

<h3 id="whats-new">What’s new</h3>

<p>Because the context switch instrumentation generates a <strong>massive</strong> volume of events, it is disabled by default. There is a new <code>--cswitch</code> command line flag to activate the stream of context switch events.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>fibratus run --filters ContextSwitch --cswitch

...
<span class="m">4207</span> 16:15:38.790000 <span class="m">0</span> conemu.exe <span class="o">(</span>7368<span class="o">)</span> - ContextSwitch <span class="o">(</span><span class="nv">cpu</span><span class="o">=</span>0, <span class="nv">next_proc_name</span><span class="o">=</span>conemu.exe, <span class="nv">next_thread_id</span><span class="o">=</span>6108, <span class="nv">next_thread_prio</span><span class="o">=</span>11, <span class="nv">next_thread_wait_time</span><span class="o">=</span>0, <span class="nv">prev_proc_name</span><span class="o">=</span>ipodservice.exe, <span class="nv">prev_thread_id</span><span class="o">=</span>0, <span class="nv">prev_thread_prio</span><span class="o">=</span>0, <span class="nv">prev_thread_state</span><span class="o">=</span>RUNNING, <span class="nv">prev_thread_wait_mode</span><span class="o">=</span>KERNEL, <span class="nv">prev_thread_wait_reason</span><span class="o">=</span>EXECUTIVE<span class="o">)</span>
<span class="m">4208</span> 16:15:38.790000 <span class="m">2</span> conemu.exe <span class="o">(</span>7368<span class="o">)</span> - ContextSwitch <span class="o">(</span><span class="nv">cpu</span><span class="o">=</span>2, <span class="nv">next_proc_name</span><span class="o">=</span>ConEmu.exe, <span class="nv">next_thread_id</span><span class="o">=</span>8076, <span class="nv">next_thread_prio</span><span class="o">=</span>11, <span class="nv">next_thread_wait_time</span><span class="o">=</span>0, <span class="nv">prev_proc_name</span><span class="o">=</span>ConEmuC64.exe, <span class="nv">prev_thread_id</span><span class="o">=</span>0, <span class="nv">prev_thread_prio</span><span class="o">=</span>0, <span class="nv">prev_thread_state</span><span class="o">=</span>RUNNING, <span class="nv">prev_thread_wait_mode</span><span class="o">=</span>KERNEL, <span class="nv">prev_thread_wait_reason</span><span class="o">=</span>EXECUTIVE<span class="o">)</span>
<span class="m">4209</span> 16:15:38.790000 <span class="m">2</span> idle <span class="o">(</span>0<span class="o">)</span> - ContextSwitch <span class="o">(</span><span class="nv">cpu</span><span class="o">=</span>2, <span class="nv">next_proc_name</span><span class="o">=</span>idle, <span class="nv">next_thread_id</span><span class="o">=</span>0, <span class="nv">next_thread_prio</span><span class="o">=</span>0, <span class="nv">next_thread_wait_time</span><span class="o">=</span>52, <span class="nv">prev_proc_name</span><span class="o">=</span>python.exe, <span class="nv">prev_thread_id</span><span class="o">=</span>8076, <span class="nv">prev_thread_prio</span><span class="o">=</span>11, <span class="nv">prev_thread_state</span><span class="o">=</span>WAITING, <span class="nv">prev_thread_wait_mode</span><span class="o">=</span>USER, <span class="nv">prev_thread_wait_reason</span><span class="o">=</span>USER_REQUEST<span class="o">)</span>
<span class="m">4210</span> 16:15:38.790000 <span class="m">3</span> chrome.exe <span class="o">(</span>8348<span class="o">)</span> - ContextSwitch <span class="o">(</span><span class="nv">cpu</span><span class="o">=</span>3, <span class="nv">next_proc_name</span><span class="o">=</span>chrome.exe, <span class="nv">next_thread_id</span><span class="o">=</span>8352, <span class="nv">next_thread_prio</span><span class="o">=</span>9, <span class="nv">next_thread_wait_time</span><span class="o">=</span>0, <span class="nv">prev_proc_name</span><span class="o">=</span>conemu.exe, <span class="nv">prev_thread_id</span><span class="o">=</span>0, <span class="nv">prev_thread_prio</span><span class="o">=</span>0, <span class="nv">prev_thread_state</span><span class="o">=</span>RUNNING, <span class="nv">prev_thread_wait_mode</span><span class="o">=</span>KERNEL, <span class="nv">prev_thread_wait_reason</span><span class="o">=</span>EXECUTIVE<span class="o">)</span>
<span class="m">4211</span> 16:15:38.790000 <span class="m">1</span> svchost.exe <span class="o">(</span>820<span class="o">)</span> - ContextSwitch <span class="o">(</span><span class="nv">cpu</span><span class="o">=</span>1, <span class="nv">next_proc_name</span><span class="o">=</span>svchost.exe, <span class="nv">next_thread_id</span><span class="o">=</span>5832, <span class="nv">next_thread_prio</span><span class="o">=</span>9, <span class="nv">next_thread_wait_time</span><span class="o">=</span>2, <span class="nv">prev_proc_name</span><span class="o">=</span>svchost.exe, <span class="nv">prev_thread_id</span><span class="o">=</span>4388, <span class="nv">prev_thread_prio</span><span class="o">=</span>9, <span class="nv">prev_thread_state</span><span class="o">=</span>WAITING, <span class="nv">prev_thread_wait_mode</span><span class="o">=</span>USER, <span class="nv">prev_thread_wait_reason</span><span class="o">=</span>LPC_REPLY<span class="o">)</span>
...</code></pre></div>

<p>Let’s see what does those event’s parameters mean.</p>

<ul>
  <li><code>cpu</code> is the identifier of the CPU core where the new thread is running after the context switch has taken place</li>
  <li><code>next_proc_name</code> identifies the process name of the thread which has been chosen by the scheduler</li>
  <li><code>next_thread_id</code> is the identifier of the new thread</li>
  <li><code>next_thread_prio</code> the priority of the new thread</li>
  <li><code>next_thread_wait_time</code> is the time thread has spent waiting in the ready queue before receiving the slice of the CPU time</li>
  <li><code>prev_proc_name</code> the process name of the thread which has been preempted by the kernel. The scheduler assigns the CPU to the new thread</li>
  <li><code>prev_thread_id</code> is the identifier of the old thread</li>
  <li><code>prev_thread_prio</code> the priority of the old thread</li>
  <li><code>prev_thread_state</code> determines the state of the previous thread</li>
  <li><code>prev_thread_wait_mode</code> indicates if the previous thread has been executing in the user space or in the kernel space</li>
  <li><code>prev_thread_wait_reason</code> the action emitted by the thread right before the dispatcher has moved it from the running queue</li>
</ul>

<p>If you have any feedback or want to contribute you can reach out via <a href="https://github.com/rabbitstack/fibratus/issues">Github</a> or drop me an email.</p>

      <hr />
      <footer role="contentinfo">
        <div class="social-share">
  <h4>Share on</h4>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=http://rabbitstack.github.io/operating%20systems/fibratus-0-3-0/" class="twitter" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=http://rabbitstack.github.io/operating%20systems/fibratus-0-3-0/" class="facebook" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=http://rabbitstack.github.io/operating%20systems/fibratus-0-3-0/" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
  </ul>
</div><!-- /.social-share -->
        <p class="byline"><strong>Fibratus 0.3.0</strong> was published on <time datetime="2016-10-03T13:48:25+02:00">October 03, 2016</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
    <section id="disqus_thread">
        
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'rabbitstack'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </section><!-- /#disqus_thread -->
  
  </article>
</div><!-- /#main -->
 
<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="http://rabbitstack.github.io/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="http://rabbitstack.github.io/operating%20systems/fibratus-0-2-3/" title="Fibratus 0.2.3">Fibratus 0.2.3</a></li>
    
      <li><a href="http://rabbitstack.github.io/operating%20systems/fibratus-pre-release/" title="Fibratus Pre-Release">Fibratus Pre-Release</a></li>
    
      <li><a href="http://rabbitstack.github.io/operating%20systems/impressions-on-installation-of-coreos-on-a-bare-metal-server/" title="Impressions on installation of CoreOS on a bare metal server">Impressions on installation of CoreOS on a bare metal server</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  
  <footer>
    

<span>&copy; 2016 Nedim Šabić. Rabbit Stack blog is powered by Jekyll. Bunny icon is courtesy of <a href="http://www.freepik.com" title="Freepik">Freepik.</a>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://rabbitstack.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://rabbitstack.github.io/assets/js/plugins/jquery.magnific-popup.js"></script>
<script src="http://rabbitstack.github.io/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'rabbitstack']);
  _gaq.push(['_trackPageview']);

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61212549-1', 'auto');
  ga('send', 'pageview');

  $(document).ready(function() {
     $('.image-popup').magnificPopup({type:'image'});
  });
</script>


  
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'rabbitstack'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


	        

</body>
</html>